<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>পরীক্ষা অ্যাপ</title>

  <!-- Bangla Font + EmailJS -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali&display=swap" rel="stylesheet">
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script>
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$', '$$'], ['\\[', '\\]']],
      processEscapes: true
    },
    svg: {
      fontCache: 'global'
    }
  };
</script>
<script id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
  
  <script>
    (function () {
      emailjs.init("9onNzIvtNvItmnRfd"); // Replace with your EmailJS user ID
    })();
  </script>

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Noto Sans Bengali', sans-serif;
    }

    body {
      background: #f9f9f9;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      background: #fff;
      width: 100%;
      max-width: 600px;
      padding: 30px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      border-radius: 12px;
    }

    h2, h3 {
      text-align: center;
      margin-bottom: 20px;
      color: #333;
    }

    input[type="text"] {
      width: 100%;
      padding: 10px;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin-bottom: 20px;
    }

    button {
      background: #007bff;
      color: white;
      border: none;
      padding: 12px 20px;
      font-size: 1rem;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    button:hover {
      background: #0056b3;
    }

    .navigation {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }

    #question {
      font-size: 1.2rem;
      margin-bottom: 20px;
      color: #222;
    }

    #options {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    label {
      background: #f0f0f0;
      padding: 10px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    label:hover {
      background: #e0e0e0;
    }

    input[type="radio"] {
      accent-color: #007bff;
    }

    #timer {
      font-size: 1.2rem;
      font-weight: bold;
      margin-bottom: 20px;
      text-align: right;
      color: #e63946;
    }

    .result {
      text-align: center;
      padding: 20px;
      font-size: 1.4rem;
      color: #155724;
      background: #d4edda;
      border-radius: 10px;
    }

    @media screen and (max-width: 500px) {
      .container {
        padding: 20px;
      }

      button {
        width: 100%;
        margin-top: 10px;
      }

      .navigation {
        flex-direction: column;
        gap: 10px;
      }
    }
  </style>
</head>

<body style="font-family: 'Noto Sans Bengali', sans-serif;">
  <div class="container">
    <div id="nameInputSection">
      <h3>পরীক্ষার্থীর নাম লিখুন:</h3>
      <input type="text" id="examinerName" placeholder="আপনার নাম লিখুন">
      <script>
        document.getElementById("").innerHTML = 
      `Result: $$\\int_{4}^{5} x^2 \\, dx$$`; </script>
      <button onclick="saveName()">পরীক্ষা শুরু করুন</button>
    </div>

    <div id="quizSection" style="display:none;">
      <div id="timer">25:00</div>
      <div id="question"></div>
      <div id="options"></div>
      <div class="navigation">
        <button id="prevBtn" onclick="prevQuestion()">পূর্ববর্তী</button>

        <button id="nextBtn" onclick="nextQuestion()">পরবর্তী</button>
      </div>
    </div>

    <div class="result" style="display:none;">
      <h2 id="score"></h2>
    </div>
  </div>

  <script>
    
const quiz = [
  {
  number: 1,
  question: '$$\\int_{4}^{5} \\ lnx \\,dx$$ এর মান কোনটি?',
  options: [
    'ক. $5 \\ln5 - 4 \\ln4 - 1$',
    'খ. $5 \\ln5 - 5 \\ln4$',
    'গ. $\\frac{369}{4}$',
    'ঘ. $\\ln(\\frac{5}{4})$',
  ],
  answer: 'ক. $5 \\ln 5 - 4 \\ln 4 - 1$',
},
  {
    number: 2,
    question: '$y^2 = 16x$ এবং $y = 4x$ দ্বারা আবদ্ধ ক্ষেত্রের ক্ষেত্রফল কোনটি?',
    options: [
      'ক. $\\frac{1}{3}$ বর্গ একক',
      'খ. $\\frac{2}{3}$ বর্গ একক',
      'গ. $\\frac{1}{6}$ বর্গ একক',
      'ঘ. $\\frac{1}{12}$ বর্গ একক',
    ],
    answer: 'খ. $\\frac{2}{3}$ বর্গ একক',
  },
  {

    number: 3,
    question: '$$\\int \\frac{1}{1 + x^2} \\, dx$$ এর সমাধান কোনটি?',
    options: [
      'ক. $\\tan^{-1}x + C$',
      'খ. $\\cot^{-1}x + C$',
      'গ. $\\ln|1+x^2| + C$',
      'ঘ. $\\sec^{-1}x + C$',
    ],
    answer: 'ক. $\\tan^{-1}x + C$',
  },
{
  number: 4,
  question: '$$\\frac{d}{dx}(e^{\\sin 2x})$$ এর মান কোনটি?',
  options: [
    'ক. $2\\cos 2x \\cdot e^{\\sin 2x}$',
    'খ. $2\\sin 2x \\cdot e^{\\sin 2x}$',
    'গ. $2e^{2x}$',
    'ঘ. $e^{x^2}$',
  ],
  answer: 'ক. $2\\cos 2x \\cdot e^{\\sin 2x}$',
},
{
  number: 5,
  question: '$$\\int_{3}^{2} (3x^2 + 2x + 1) \\, dx$$ এর ফলাফল কোনটি?',
  options: [
    'ক. $-25$',
    'খ. $25$',
    'গ. $-14$',
    'ঘ. $39$',
  ],
  answer: 'ক. $-25$',
},

{
  number: 6,
  question: '$$\\begin{bmatrix} 2 & 3 \\\\ 4 & 5 \\end{bmatrix} + \\begin{bmatrix} 1 & 0 \\\\ -1 & 2 \\end{bmatrix}$$ এর ফলাফল কোনটি?',
  options: [
    'ক. $\\begin{bmatrix} 3 & 3 \\\\ 3 & 7 \\end{bmatrix}$',
    'খ. $\\begin{bmatrix} 1 & 3 \\\\ 3 & 3 \\end{bmatrix}$',
    'গ. $\\begin{bmatrix} 3 & 3 \\\\ 5 & 7 \\end{bmatrix}$',
    'ঘ. $\\begin{bmatrix} 2 & 3 \\\\ 5 & 3 \\end{bmatrix}$',
  ],
  answer: 'ক. $\\begin{bmatrix} 3 & 3 \\\\ 3 & 7 \\end{bmatrix}$',
},

{
  number: 7,
  question: '$$\\text{det} \\left( \\begin{bmatrix} 3 & 2 \\\\ 5 & 4 \\end{bmatrix} \\right)$$ এর মান কত?',
  options: [
    'ক. $7$',
    'খ. $-2$',
    'গ. $2$',
    'ঘ. $-7$',
  ],
  answer: 'ঘ. $-7$',
},

{
  number: 8,
  question: 'একটি ম্যাট্রিক্স $$A = \\begin{bmatrix} a & b \\\\ c & d \\end{bmatrix}$$ হলে $$A^{-1}$$ এর সূত্র কী?',
  options: [
    'ক. $\\frac{1}{ad-bc} \\begin{bmatrix} d & -b \\\\ -c & a \\end{bmatrix}$',
    'খ. $\\frac{1}{ab-cd} \\begin{bmatrix} -d & b \\\\ c & -a \\end{bmatrix}$',
    'গ. $\\frac{1}{ab+cd} \\begin{bmatrix} a & b \\\\ c & d \\end{bmatrix}$',
    'ঘ. $\\begin{bmatrix} a & -b \\\\ -c & d \\end{bmatrix}$',
  ],
  answer: 'ক. $\\frac{1}{ad-bc} \\begin{bmatrix} d & -b \\\\ -c & a \\end{bmatrix}$',
},

{
  number: 9,
  question: '$$\\begin{bmatrix} 1 & 2 \\\\ 0 & 1 \\end{bmatrix}^2$$ এর মান কত?',
  options: [
    'ক. $\\begin{bmatrix} 1 & 4 \\\\ 0 & 1 \\end{bmatrix}$',
    'খ. $\\begin{bmatrix} 1 & 2 \\\\ 0 & 2 \\end{bmatrix}$',
    'গ. $\\begin{bmatrix} 1 & 2 \\\\ 0 & 1 \\end{bmatrix}$',
    'ঘ. $\\begin{bmatrix} 1 & 3 \\\\ 0 & 1 \\end{bmatrix}$',
  ],
  answer: 'ক. $\\begin{bmatrix} 1 & 4 \\\\ 0 & 1 \\end{bmatrix}$',
},

{
  number: 10,
  question: 'যদি $$A = \\begin{bmatrix} 1 & 2 \\\\ 3 & 4 \\end{bmatrix}, B = \\begin{bmatrix} 0 & 1 \\\\ 1 & 0 \\end{bmatrix}$$ হয়, তবে $$AB$$ এর মান কত?',
  options: [
    'ক. $\\begin{bmatrix} 2 & 1 \\\\ 4 & 3 \\end{bmatrix}$',
    'খ. $\\begin{bmatrix} 1 & 2 \\\\ 3 & 4 \\end{bmatrix}$',
    'গ. $\\begin{bmatrix} 2 & 1 \\\\ 3 & 4 \\end{bmatrix}$',
    'ঘ. $\\begin{bmatrix} 0 & 1 \\\\ 1 & 0 \\end{bmatrix}$',
  ],
  answer: 'ক. $\\begin{bmatrix} 2 & 1 \\\\ 4 & 3 \\end{bmatrix}$',
}
,
{
  number: 11,
  question: 'রেখা $$3x - 4y + 5 = 0$$ এর এবং বিন্দু $$P(1,2)$$ থেকে দৈর্ঘ্য কত?',
  options: [
    'ক. $\\frac{11}{5}$',
    'খ. $\\frac{7}{5}$',
    'গ. $\\frac{3}{5}$',
    'ঘ. $\\frac{9}{5}$',
  ],
  answer: 'খ. $\\frac{7}{5}$',
},

{
  number: 12,
  question: 'বৃত্ত $$x^2 + y^2 - 4x + 6y - 12 = 0$$ এর কেন্দ্র এবং ব্যাসার্ধ নির্ণয় করো।',
  options: [
    'ক. কেন্দ্র $(2, -3)$, ব্যাসার্ধ 5',
    'খ. কেন্দ্র $(2, -3)$, ব্যাসার্ধ 4',
    'গ. কেন্দ্র $(-2, 3)$, ব্যাসার্ধ 5',
    'ঘ. কেন্দ্র $(-2, 3)$, ব্যাসার্ধ 4',
  ],
  answer: 'ক. কেন্দ্র $(2, -3)$, ব্যাসার্ধ 5',
},

{
  number: 13,
  question: 'রেখার সমীকরণ $$2x - 3y + 7 = 0$$ এবং $$4x - 6y + k = 0$$ সমান্তরাল হলে $k$ এর মান কত?',
  options: [
    'ক. 14',
    'খ. $-14$',
    'গ. 7',
    'ঘ. $-7$',
  ],
  answer: 'খ. $-14$',
},

{
  number: 14,
  question: 'বৃত্ত $$x^2 + y^2 = 25$$ এর উপর $$y = mx + c$$ রেখাটি স্পর্শক হলে $c$ এর মান কি?',
  options: [
    'ক. $\\pm 5\\sqrt{1 + m^2}$',
    'খ. $\\pm 25\\sqrt{1 + m^2}$',
    'গ. $\\pm 5(1+m^2)$',
    'ঘ. $\\pm \\sqrt{1 + m^2}$',
  ],
  answer: 'ক. $\\pm 5\\sqrt{1 + m^2}$',
},

{
  number: 15,
  question: 'বৃত্তের সমীকরণ $$x^2 + y^2 - 6x + 8y + 9 = 0$$ এর কেন্দ্র এবং ব্যাসার্ধ কত?',
  options: [
    'ক. কেন্দ্র $(3, -4)$, ব্যাসার্ধ 4',
    'খ. কেন্দ্র $(-3, 4)$, ব্যাসার্ধ 4',
    'গ. কেন্দ্র $(3, -4)$, ব্যাসার্ধ 2',
    'ঘ. কেন্দ্র $(-3, 4)$, ব্যাসার্ধ 2',
  ],
  answer: 'ক. কেন্দ্র $(3, -4)$, ব্যাসার্ধ 4',
},

{
  number: 16,
  question: 'রেখা $$x - 2y + 3 = 0$$ এবং $$3x + ky = 7$$ এর ছেদবিন্দুর মাধ্যমে $k$ এর মান নির্ণয় করো যদি ছেদবিন্দুটি $x$ অক্ষের উপর থাকে।',
  options: [
    'ক. $-6$',
    'খ. $6$',
    'গ. $3$',
    'ঘ. $-3$',
  ],
  answer: 'খ. $6$',
},

{
  number: 17,
  question: 'বৃত্ত $$x^2 + y^2 - 4x - 6y + 9 = 0$$ এবং রেখা $$3x + 4y = 24$$ এর দূরত্ব কত?',
  options: [
    'ক. 7',
    'খ. 5',
    'গ. 3',
    'ঘ. 4',
  ],
  answer: 'গ. 3',
},

{
  number: 18,
  question: 'রেখা $$y = mx + c$$ বৃত্ত $$x^2 + y^2 = 1$$ এর স্পর্শক হলে $c$ এর মানের শর্ত কী?',
  options: [
    'ক. $c^2 = 1 + m^2$',
    'খ. $c^2 = 1 - m^2$',
    'গ. $c^2 = m^2 - 1$',
    'ঘ. $c = m$',
  ],
  answer: 'ক. $c^2 = 1 + m^2$',
},

{
  number: 19,
  question: 'বৃত্ত $$x^2 + y^2 = 16$$ এর কেন্দ্র থেকে বিন্দু $$P(6, 4)$$ এর দূরত্ব কত?',
  options: [
    'ক. 10',
    'খ. 8',
    'গ. 5',
    'ঘ. 12',
  ],
  answer: 'ক. 10',
},

{
  number: 20,
  question: 'দুটি রেখা $$2x + y - 1 = 0$$ এবং $$4x + 2y + k = 0$$ পরস্পর লম্ব হলে $k$ এর মান কত?',
  options: [
    'ক. 2',
    'খ. $-2$',
    'গ. 0',
    'ঘ. $-1$',
  ],
  answer: 'গ. 0',
},
{
  number: 21,
  question: ' যদি $$\\   \\sin\\theta + \\cos\\theta = \\frac{5}{4},$$  তবে  $$sin 2\\theta = ?$$',
  options: [
    'ক. $\\frac{7}{8}$',
    'খ. $\\frac{3}{4}$',
    'গ. $\\frac{9}{16}$',
    'ঘ. $\\frac{1}{2}$',
  ],
  answer: 'গ. $\\frac{15}{16}$',
},

{
  number: 22,
  question: '$$tan A = 2,$$ তবে $$ \\tan2A + \\sin2A = ?$$', 
  options: [
    'ক. $-\\frac{7}{8}$',
    'খ. $\\frac{4}{3}$',
    'গ. $-\\frac{8}{15}$',
    'ঘ. $\\frac{1}{2}$',
  ],
  answer: 'গ. $-\\frac{8}{15}$',
},

{
  number: 23,
  question: '$$\\ a = 7, b = 9, c = 10 $$ হলে $$ cos C = ?$$',
  options: [
    'ক. $\\frac{1}{10}$',
    'খ. $\\frac{7}{9}$',
    'গ. $\\frac{17}{45}$',
    'ঘ. $\\frac{9}{14}$',
  ],
  answer: 'গ. $\\frac{17}{45}$',
},
{
  number: 24,
  question: '$$\\frac{d}{dx}\\left(e^{x^2 \\sin x}\\right)$$ এর মান কোনটি?',
  options: [
    'ক. $e^{x^2\\sin x} (2x\\sin x + x^2\\cos x)$',
    'খ. $e^{x^2\\sin x} (\\sin x + \\cos x)$',
    'গ. $2x\\cos x + x^2\\sin x$',
    'ঘ. $e^{x^2\\sin x} (2x\\cos x + x^2\\sin x)$',
  ],
  answer: 'ক. $e^{x^2\\sin x} (2x\\sin x + x^2\\cos x)$',
},
{
  number: 25,
  question: '$$\\frac{d}{dx}\\left(x^x\\right)$$ এর মান কোনটি?',
  options: [
    'ক. $x^x(1 + \\ln x)$',
    'খ. $x^{x-1}$',
    'গ. $x^x \\ln x$',
    'ঘ. $x^x(\\ln x - 1)$',
  ],
  answer: 'ক. $x^x(1 + \\ln x)$',
}
];



    let currentQuestion = 0;
    let score = 0;
    let timeRemaining = 25 * 60;
    let timerInterval;
    let selectedAnswers = new Array(quiz.length).fill(null);
    let examinerName = "";

    // Prevent retake logic
    window.onload = function () {
      const lastExamTime = localStorage.getItem("examCompletedTime");
      if (lastExamTime) {
        const elapsedTime = Date.now() - parseInt(lastExamTime, 10);
        const oneHour = 1 * 60 * 1000;
        if (elapsedTime < oneHour) {
          document.querySelector(".container").innerHTML = `
            <div class="result">
              <h2>আপনি ইতোমধ্যে পরীক্ষাটি সম্পন্ন করেছেন।</h2>
            </div>`;
          return;
        } else {
          localStorage.removeItem("examCompleted");
          localStorage.removeItem("examCompletedTime");
        }
      }
    };

    function saveName() {
      const nameInput = document.getElementById('examinerName').value.trim();
      if (nameInput === "") {
        alert("অনুগ্রহ করে আপনার নাম লিখুন।");
        return;
      }

      examinerName = nameInput;
      document.getElementById('nameInputSection').style.display = 'none';
      document.getElementById('quizSection').style.display = 'block';
      showQuestion();
      timerInterval = setInterval(updateTimer, 1000);
    }

    function updateTimer() {
      if (timeRemaining <= 0) {
        clearInterval(timerInterval);
        submitExam();
        return;
      }

      const minutes = Math.floor(timeRemaining / 60);
      const seconds = timeRemaining % 60;
      document.getElementById('timer').innerText = `${minutes}:${seconds.toString().padStart(2, '0')}`;
      timeRemaining--;
    }

function showQuestion() {
  const q = quiz[currentQuestion];
  const questionDiv = document.getElementById('question');
  questionDiv.innerHTML = `প্রশ্ন ${currentQuestion + 1}: ${q.question}`;

  const optionsDiv = document.getElementById('options');
  optionsDiv.innerHTML = '';
  q.options.forEach((opt, idx) => {
    const label = document.createElement('label');
    label.innerHTML = `<input type="radio" name="option" value="${idx}" ${selectedAnswers[currentQuestion] === idx ? 'checked' : ''}> ${opt}`;
    optionsDiv.appendChild(label);
  });

  document.getElementById('prevBtn').disabled = currentQuestion === 0;
  document.getElementById('nextBtn').innerText = currentQuestion === quiz.length - 1 ? 'জমা দিন' : 'পরবর্তী';

  // MathJax দিয়ে নতুন কনটেন্ট রেন্ডার করুন
  MathJax.typesetPromise([questionDiv, optionsDiv]);
}


    function nextQuestion() {
      const selectedOption = document.querySelector('input[name="option"]:checked');
      if (selectedOption) {
        const q = quiz[currentQuestion];
        selectedAnswers[currentQuestion] = q.options[parseInt(selectedOption.value)];

      }

      if (currentQuestion === quiz.length - 1) {
        submitExam();
        return;
      }

      currentQuestion++;
      showQuestion();
    }

    function prevQuestion() {
      if (currentQuestion > 0) {
        currentQuestion--;
        showQuestion();
      }
    }

    function submitExam() {
      clearInterval(timerInterval);
      score = selectedAnswers.reduce((acc, curr, idx) => curr === quiz[idx].answer ? acc + 1 : acc, 0);

      document.querySelector('.result').style.display = 'flex';
      document.getElementById('score').innerText = `${examinerName} - ফলাফল: ${score} / ${quiz.length}`;
      document.querySelector('.navigation').style.display = 'none';
      document.getElementById('question').style.display = 'none';
      document.getElementById('options').style.display = 'none';

      localStorage.setItem('examCompleted', true);
      localStorage.setItem('examCompletedTime', Date.now().toString());

      // Optional: Enable EmailJS
      
      // emailjs.send("service_bqhs75j", "template_o3dw98v", {
      //   name: examinerName,
      //   score: `${score}/${quiz.length}`,
      //   time: new Date().toLocaleString()
      // })
      // .then(() => {
      //   alert('স্কোর সফলভাবে ইমেইল করা হয়েছে।');
      // }, (error) => {
      //   alert('ইমেইল পাঠাতে ব্যর্থ হয়েছে।');
      //   console.error('Email error:', error);
      // });
      
    }
  </script>
</body>
</html>
